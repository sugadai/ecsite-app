"use strict";var con=require("../db/dbconnect"),SignIn=function(o,n){console.log(o.body);var e=o.body.username,s=o.body.password;con.query("SELECT * FROM USERS WHERE username=? AND password=?;",[e,s],function(e,s){if(e)throw e;console.log(s[0]),s.length&&(o.session.userid=s[0].id,console.log("ログイン成功ユーザーID： "+o.session.userid),o.session.username=s[[0]].username,o.session.email=s[0].email,console.log(o.session.username),n.redirect("/api/v1/userpage"))})},SignUp=function(o,n){var i=o.body.username,r=o.body.email,e=o.body.password;con.query("INSERT INTO USERS (username,email,password) value(?,?,?);",[i,r,e],function(e,s){if(console.log(s.insertId),o.session.userid=s.insertId,o.session.username=i,o.session.email=r,console.log("会員登録されたユーザID："+s.insertId),e)throw e;n.redirect("/api/v1/userpage")})},SignOut=function(e,s){console.log(e.session.userid),e.session.destroy(function(e){if(e)throw e}),console.log("ログアウト完了"),s.redirect("/api/v1/")};module.exports={SignIn:SignIn,SignUp:SignUp,SignOut:SignOut};
//# sourceMappingURL=usertask.min.js.map
